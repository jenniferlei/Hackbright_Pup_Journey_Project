{% extends 'base.html' %} {% block title %}{{ hike.hike_name }} - Details{%
endblock %} {% block body %}

<div class="container-fluid">
  <div class="d-flex justify-content-start">

    <!-- START SEARCH BAR -->

    <div class="card col-3 mt-4 search-bar-container">
      <div class="card-header"><h3>Search</h3></div>

      <div class="card-body">
      <small><a href="/hikes">View all hikes</a></small>

      <div style="padding:.5em">
      <form method="GET" action="/hikes/search">
        <div class="form-floating row mt-2">
          <input id="search-keyword"
                  class="form-control"
                  type="text"
                  name="keyword"
                  placeholder="keyword"
          ></input>
          <label class="form-label" for="search-keyword"><small class="form-text text-muted">Keyword</small></label>
        </div>

        <div class="row mt-3"><label class="form-label">Difficulty</label></div>
        <div class="row">

          <div class="col">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="difficulty" value="easy" id="search-difficulty-easy">
              <label class="form-check-label" for="search-difficulty-easy">
                easy
              </label>
            </div>
          </div>

          <div class="col">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="difficulty" value="moderate" id="search-difficulty-moderate">
              <label class="form-check-label" for="search-difficulty-moderate">
                moderate
              </label>
            </div>
          </div>

          <div class="col">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="difficulty" value="hard" id="search-difficulty-hard">
              <label class="form-check-label" for="search-difficulty-hard">
                hard
              </label>
            </div>
          </div>

        </div>

        <div class="row mt-3"><label class="form-label">Leash Rule</label></div>
        <div class="row">

          <div class="col">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="leash_rule" value="easy" id="search-on-leash">
              <label class="form-check-label" for="search-on-leash">
                on leash
              </label>
            </div>
          </div>

          <div class="col">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="leash_rule" value="moderate" id="search-off-leash">
              <label class="form-check-label" for="search-off-leash">
                off leash
              </label>
            </div>
          </div>

        </div>

        <div class="form-label mt-3">Location</div>

        <div class="form-floating row mt-2">
          <select id="search-state"
                  class="form-select"
                  name="state"
                  aria-label="search-state">
            <option value=""></option>
            {% for state in states|sort() %}
            <option value="{{ state }}">{{ state }}</option>
            {% endfor %}
          </select>
          <label class="form-label" for="search-state">State</label>
        </div>

        <div class="row g-2 mt-2">

          <div class="form-floating col">
            <select id="search-city"
                    class="form-select"
                    name="city"
                    aria-label="search-city">
              <option value=""></option>
              {% for city in cities|sort() %}
              <option value="{{ city }}">{{ city }}</option>
              {% endfor %}
            </select>
            <label class="form-label" for="search-city">City</label>
          </div>
          
          <div class="form-floating col">
            <select id="search-area"
                    class="form-select"
                    name="area"
                    aria-label="search-area">
              <option value=""></option>
              {% for area in areas|sort() %}
              <option value="{{ area }}">{{ area }}</option>
              {% endfor %}
            </select>
            <label class="form-label" for="search-area">Area</label>
          </div>

        </div>

        <div class="row mt-3"><label class="form-label">Length (Miles)</label></div>
        <div class="row g-2">
          
          <div class="form-floating col">
            <input type="number"
                    step=0
                    min=0
                    name="length_min"
                    placeholder=0
                    class="form-control"
                    id="search-length-min">
            <label class="form-label" for="search-length-min"><small class="form-text text-muted">min</small></label>
          </div>

          <div class="form-floating col">
            <input type="number"
                    step=0
                    min=0
                    name="length_max"
                    placeholder=0
                    class="form-control"
                    id="search-length-max">
            <label class="form-label" for="search-length-max"><small class="form-text text-muted">max</small></label>
          </div>
        </div>

        <div class="mt-3"><label class="form-label" for="search-parking">Parking</label></div>
        <div class="form-floating row">
          <select id="search-parking"
                  class="form-select"
                  name="parking"
                  aria-label="search-parking">
            <option value=""></option>
            {% for park in parking|sort() %}
            <option value="{{ park }}">{{ park }}</option>
            {% endfor %}
          </select>
          <label class="form-label" for="search-parking">Parking</label>
        </div>

        <div class="row">
          <button class="btn btn-sm btn-outline-dark btn-block mt-4" type="submit">Submit</button>
        </div>

      </form>
      </div>
      </div>
    </div>

    <!-- END SEARCH BAR -->

    <!-- HIKE INFO -->

    <div class="card col mt-4" style="width:100vw">

      <div class="card-header" id="hike_name"><h3>{{ hike.hike_name }}</h3></div>

      <div class="card-body">

        {{ hike.description }}
        <ul class="no-bullets">
          <li>
            <strong><span id="area">Area:</span></strong> {{ hike.area }}, {{
            hike.city }}, {{ hike.state }}
          </li>
          <li>
            <strong><span id="difficulty">Difficulty:</span></strong> {{
            hike.difficulty }}
          </li>
          <li>
            <strong><span id="leash_rule">Leash Rule:</span></strong> {{
            hike.leash_rule }}
          </li>
          <li>
            <strong><span id="address">Address:</span></strong> {{ hike.address }}
          </li>
          <li>
            <strong><span id="coordinates">Coordinates:</span></strong> <span id="latitude">{{ hike.latitude }}</span>, <span id="longitude">{{ hike.longitude }}</span>
          </li>
          <li>
            <strong><span id="length">Length:</span></strong> {{ hike.miles }} {{
            hike.path }}
          </li>
          <li>
            <strong><span id="parking">Parking:</span></strong> {{ hike.parking }}
          </li>
          <li>
            <strong><span id="resources">Resources:</span></strong>
            {% for hike_resource in hike_resources %}
            <br /><a href="{{ hike_resource }}" target="_blank"
              >{{ hike_resource }}</a
            >
            {% endfor %}
          </li>
        </ul>

      <!-- Tabs for map, comments, bookmarks and check ins -->
      <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button
            class="nav-link active"
            id="nav-map-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-map"
            type="button"
            role="tab"
            aria-controls="nav-map"
            aria-selected="true"
          >
            Map
          </button>

          <button
            class="nav-link"
            id="nav-comments-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-comments"
            type="button"
            role="tab"
            aria-controls="nav-comments"
            aria-selected="false"
          >
            Comments
          </button>

          <button
            class="nav-link"
            id="nav-bookmarks-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-bookmarks"
            type="button"
            role="tab"
            aria-controls="nav-bookmarks"
            aria-selected="false"
          >
            Bookmarks
          </button>
          <button
            class="nav-link"
            id="nav-checkins-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-checkins"
            type="button"
            role="tab"
            aria-controls="nav-checkins"
            aria-selected="false"
          >
            Check Ins
          </button>
        </div>
      </nav>
      <!-- End Tabs for comments, bookmarks and check ins -->

      <!-- Begin All Tab Panels Content -->
      <div class="tab-content" id="nav-tabContent">

        <!-- Begin Map Panel content -->
        <div
          class="tab-pane fade show active"
          id="nav-map"
          role="tabpanel"
          aria-labelledby="nav-map-tab"
        >
          <div class="mt-3">

            <div class="embed-google-map">
              <iframe width="100%" height="375" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q={{ hike.latitude }},{{ hike.longitude }}&t=&zoom=8&maptype=roadmap&ie=UTF8&iwloc=&output=embed">
              </iframe>
            </div>



            <!-- <div id="map">
              <iframe
                width="500"
                height="300"
                frameborder="0" style="border:0"
                src="https://www.google.com/maps/embed/v1/directions?key={{ GOOGLE_KEY }}&origin=Current+Location&destination={{ hike.latitude }},{{ hike.longitude }}&center={{ hike.latitude }},{{ hike.longitude }}&avoid=tolls&zoom=11" allowfullscreen>
              </iframe>
            </div> -->
          </div>
        </div>
        <!-- End Map Panel content -->

        <!-- Begin Comments Panel content -->
        <div
          class="tab-pane fade"
          id="nav-comments"
          role="tabpanel"
          aria-labelledby="nav-comments-tab"
        >
          <!-- Begin Add Comment Modal -->
          {% if "login" in session %}
          <a class="btn btn-link btn-sm mt-2" href="" data-bs-toggle="modal" data-bs-target="#modal-add-comment"><small>+ Comment</small></a>

          <div class="modal fade" id="modal-add-comment" tabindex="-1" aria-labelledby="modal-add-comment-label" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="modal-add-comment-label">Add a Comment</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form
                    action="/hikes/{{ hike.hike_id }}/comments"
                    id="form-add-comment"
                    method="POST"
                  >
                    <div class="mb-3">
                      <input
                        type="text"
                        name="body"
                        class="form-control"
                        placeholder="Enter your comment here"
                        required
                      />
                    </div>
                  <div class="modal-footer">
                    <button class="btn btn-sm btn-outline-dark btn-block" type="submit">Submit</button>
                    <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                  </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          {% else %}
          <div class="mt-3">Please log in to add a comment.</div>
          {% endif %}
          <!-- End of Add Comment Modal -->
          
          <!-- Begin View All Comments -->
          <div class="hike-details-bottom-container">
            {% for comment in comments|sort(attribute='date_created',
            reverse=True) %}
            <div class="card mt-1">
              <div class="card-header">
                <div class="clearfix">
                  <div style="float:left">
                  {{ comment.user.full_name }}
                  <small class="text-muted">posted on {{
                  comment.date_created.strftime('%b %d, %Y %I:%M %p') }}{% if
                  comment.edit == True %} (edited on {{
                  comment.date_edited.strftime('%b %d, %Y %I:%M %p') }}){% endif
                  %}</small>
                  </div>

                  
                  {% if "login" in session and comment.user_id == user.user_id %}
                  <div class="d-flex" style="float:right">
                  
                    <a
                      href="" 
                      data-bs-toggle="modal"
                      data-bs-target="#modal-edit-comment-{{ comment.comment_id }}"
                      style="color: rgb(44, 44, 44)"
                    >
                      <small><i data-bs-toggle="tooltip" data-bs-placement="right" title="edit comment" class="bi bi-pencil"></i></small>
                    </a>
                    
                    &nbsp;&nbsp;&nbsp;
          
                    <!-- Begin Delete Comment Form -->
                    <form
                      action="/delete-comment"
                      method="POST"
                    >
                      <button
                        class="btn btn-sm"
                        style="padding:0"
                        type="submit"
                        name="delete"
                        value="{{ comment.comment_id }}"
                        onclick="return confirm('Do you want to delete this comment?');"
                      >
                        <i data-bs-toggle="tooltip" data-bs-placement="right" title="delete comment" class="bi bi-x"></i>
                      </button>
                    </form>
                    <!-- End Delete Comment Form -->
                  </div>
                  {% endif %}
                </div>

                
              </div>
              
                <!-- Begin Edit Comment Modal -->
                {% if "login" in session %}
                <div class="modal fade" id="modal-edit-comment-{{ comment.comment_id }}" tabindex="-1" aria-labelledby="modal-edit-comment-{{ comment.comment_id }}-label" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="modal-edit-comment-{{ comment.comment_id }}-label">Edit Comment</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <form
                          action="/edit-comment"
                          method="POST"
                        >
                          <div class="mb-3">
                            <input
                              type="text"
                              class="form-control input-lg"
                              name="body"
                              value="{{ comment.body }}"
                              required
                            />
                          </div>

                        <div class="modal-footer">
                          <button class="btn btn-sm btn-outline-dark btn-block" type="submit" name="edit" value="{{ comment.comment_id }}">Save</button>
                          <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                        </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
                {% endif %}
                <!-- End of Edit Comment Modal -->
              
              <div class="card-body">
                {{ comment.body }} 
              </div>
              
            </div>

            {% endfor %}
          </div>
        </div>
        <!-- End Comments Panel content -->

          
        

        <!-- Begin Bookmarks Panel content -->
        <div
          class="tab-pane fade"
          id="nav-bookmarks"
          role="tabpanel"
          aria-labelledby="nav-bookmarks-tab"
        >
          {% if "login" in session %}
          <!-- Begin Add Bookmark Modal -->
          <a class="btn btn-link btn-sm mt-2" href="" data-bs-toggle="modal" data-bs-target="#modal-add-bookmark"><small>+ Bookmark</small></a>

          <div class="modal fade" id="modal-add-bookmark" tabindex="-1" aria-labelledby="modal-add-bookmark-label" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="modal-add-bookmark-label">Bookmark this hike</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form
                    action="/add-hike"
                    method="POST"
                  >
                    <h4>Add to New Bookmark List</h4>

                    <div class="mb-3">
                      <input
                        type="text"
                        name="bookmarks_list_name"
                        class="form-control input-lg"
                        placeholder="Hikes I Want To Visit"
                        required
                      />
                    </div>

                    <div class="mb-3">
                      <button
                        class="btn btn-sm btn-outline-dark btn-block"
                        type="submit"
                        name="hike_id"
                        value="{{ hike.hike_id }}"
                      >
                        Save
                      </button>
                    </div>
                  </form>

                  <form
                    action="/add-hike"
                    method="POST"
                  >
                    <h4>Add to Existing Bookmark List</h4>

                    <div class="mb-3">
                      <select name="bookmarks_list_id" class="form-control input-lg">
                        {% for bookmarks_list in bookmarks_list_by_user %}
                        <option value="{{ bookmarks_list.bookmarks_list_id }}">
                          {{ bookmarks_list.bookmarks_list_name }}
                        </option>
                        {% endfor %}
                      </select>
                    </div>

                    <div class="mb-3">
                      <button
                        class="btn btn-sm btn-outline-dark btn-block"
                        type="submit"
                        name="hike_id"
                        value="{{ hike.hike_id }}"
                      >
                        Save
                      </button>
                    </div>
                  </form>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- End of Add Bookmark Modal -->
          
        {% if bookmarks_lists_by_user_hike != [] %}
        
          <div class="mt-1">You have this hike on the following lists (click on list name to view all
          hikes on the list):</div>

          <div class="hike-details-bottom-container">
          
            {% for bookmarks_list in bookmarks_lists_by_user_hike %}
            <div class="card mt-1">
              <div class="card-header">
                <div class="clearfix">
                  <div style="float:left">
                    <a
                      data-bs-toggle="collapse"
                      href="#collapse-bookmarks-{{ bookmarks_list.bookmarks_list_id }}"
                      role="button"
                      aria-expanded="false"
                      aria-controls="collapse-bookmarks-{{ bookmarks_list.bookmarks_list_id }}"
                    >
                      {{ bookmarks_list.bookmarks_list_name }}
                    </a>
                  </div>

                  <div class="d-flex" style="float:right">
                    
                    <a 
                    href="" 
                    data-bs-toggle="modal" 
                    data-bs-target="#modal-rename-bookmark-{{ bookmarks_list.bookmarks_list_id }}"
                    style="color: rgb(44, 44, 44)"
                    >
                      <small><i data-bs-toggle="tooltip" data-bs-placement="right" title="rename list" class="bi bi-pencil"></i></small>
                    </a>
                  
                    &nbsp;&nbsp;&nbsp;

                    <form
                      action="/delete-bookmarks-list"
                      method="POST"
                    >
                      <button
                        class="btn btn-sm"
                        style="padding:0"
                        type="submit"
                        name="delete"
                        value="{{ bookmarks_list.bookmarks_list_id }}"
                        onclick="return confirm('Do you want to delete this list?');"
                      >
                        <i data-bs-toggle="tooltip" data-bs-placement="right" title="delete list" class="bi bi-x"></i>
                      </button>
                    </form>
                  </div>
                  
                </div>
              </div>
              <!-- End Delete Bookmark Form -->

              <div class="modal fade" id="modal-rename-bookmark-{{ bookmarks_list.bookmarks_list_id }}" tabindex="-1" aria-labelledby="modal-rename-bookmark-{{ bookmarks_list.bookmarks_list_id }}-label" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="modal-rename-bookmark-{{ bookmarks_list.bookmarks_list_id }}-label">Rename Bookmark</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <form
                        action="/edit-bookmarks-list"
                        method="POST"
                      >
                        <div class="mb-3">
                        <input
                          type="text"
                          name="bookmarks_list_name"
                          class="form-control input-lg"
                          value="{{ bookmarks_list.bookmarks_list_name }}"
                          required
                        />
                      </div>

                      <div class="modal-footer">
                        <button class="btn btn-sm btn-outline-dark btn-block" type="submit" name="edit" value="{{ bookmarks_list.bookmarks_list_id }}">Save</button>
                        <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                      </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Rename Bookmark Modal -->

              <div
                class="collapse card-body"
                id="collapse-bookmarks-{{ bookmarks_list.bookmarks_list_id }}"
              >
                <div>
                    {% for hike in bookmarks_list.hikes %}
                      <div class="row">
                        <div class="d-flex">
                        <form
                          action="/remove-hike"
                          method="POST"
                        >
                          <button
                            class="btn btn-sm"
                            style="padding:0"
                            type="submit"
                            name="delete"
                            value="{{ hike.hike_id }},{{ bookmarks_list.bookmarks_list_id }}"
                            onclick="return confirm('Do you want to remove this hike?');"
                          ><small>
                            <i data-bs-toggle="tooltip" data-bs-placement="right" title="remove from list" class="bi bi-x"></i>
                          </small></button>
                        </form>

                        &nbsp;&nbsp;&nbsp;
                        <a href="/hikes/{{ hike.hike_id }}" target="_blank"
                          >{{ hike.hike_name }}</a
                        >
                        </div>
                      </div>
                    {% endfor %}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>

          
        {% endif %}


          {% else %}
          <div class="mt-3">Please log in to add a bookmark.</div>
          {% endif %}
        </div>
        <!-- End Bookmarks tab content -->


        <!-- Begin Check ins tab content -->
        <div
          class="tab-pane fade"
          id="nav-checkins"
          role="tabpanel"
          aria-labelledby="nav-checkins-tab"
        >
          {% if "login" in session %}
          <!-- Begin Add Check In Modal -->
          <a class="btn btn-link btn-sm mt-2" href="" data-bs-toggle="modal" data-bs-target="#modal-add-check-in"><small>+ Check In</small></a>

          <div class="modal fade" id="modal-add-check-in" tabindex="-1" aria-labelledby="modal-add-check-in-label" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="modal-add-check-in-label">Check in to this hike</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form
                    action="/check-in"
                    method="POST"
                    onSubmit="validateCheckIn() || event.preventDefault();"
                  >
                    <div class="mb-3">
                      <label for="pet_id" class="sr-only">Pets</label>&nbsp;<small class="text-muted">*</small>
                      {% for pet in pets|sort(attribute='pet_name') %}
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="add-check-in-pet_id" value="{{ pet.pet_id }}" id="check-in-{{ pet.pet_id }}">
                        <label class="form-check-label" for="check-in-{{ pet.pet_id }}">
                          {{ pet.pet_name }}
                        </label>
                      </div>
                      {% endfor %}
                    </div>

                    <div class="mb-3">
                      <label for="date_hiked" class="sr-only">Date Hiked</label>&nbsp;<small class="text-muted">*</small>
                      <input
                        type="date"
                        name="date_hiked"
                        class="form-control"
                        required
                      />
                    </div>

                    <div class="mb-3">
                      <label for="miles_completed" class="sr-only"
                        >Miles Completed</label
                      >&nbsp;<small class="text-muted">*</small>
                      <input
                        type="number"
                        step=".1"
                        min="0"
                        name="miles_completed"
                        class="form-control"
                      />
                    </div>

                    <div class="mb-3">
                      <label for="total_time" class="sr-only">Total Time (Hours)</label>
                      <input
                        type="number"
                        step=".1"
                        min="0"
                        name="total_time"
                        class="form-control"
                      />
                    </div>

                    <div class="mb-3">
                      <label for="notes" class="sr-only">Notes</label>
                      <input
                          type="text"
                          name="notes"
                          class="form-control"
                      />
                    </div>
                  <div class="modal-footer">
                    <button class="btn btn-sm btn-outline-dark btn-block" type="submit" name="hike_id" value="{{ hike.hike_id }}">Submit</button>
                    <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                  </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <!-- End of Add Check In Modal -->

          <!-- Begin check in details for the hike -->
          {% if check_ins != [] %}
          <div class="hike-details-bottom-container">

              {% for check_in in check_ins|sort(attribute='date_hiked', reverse=True) %}
              <div class="card card-body mt-1">
                <div class="clearfix">
                  <div style="float:left">
                      🐾&nbsp;&nbsp;
                      {% if check_in.pets|length > 2 %}
                        {% for pet in check_in.pets|sort(attribute='pet_name') %}
                          {% if not loop.last %}
                          {{ pet.pet_name }}, 
                          {% else %}
                          and {{ pet.pet_name }}
                          {% endif %}
                        {% endfor %}
                      {% elif check_in.pets|length > 1 %}
                        {% for pet in check_in.pets|sort(attribute='pet_name') %}
                          {% if not loop.last %}
                          {{ pet.pet_name }} and 
                          {% else %}
                          {{ pet.pet_name }}
                          {% endif %}
                        {% endfor %}
                      {% else %}
                        {% for pet in check_in.pets|sort(attribute='pet_name') %}
                          {{ pet.pet_name }}
                        {% endfor %}
                      {% endif %}

                      did this hike on {{ check_in.date_hiked.strftime('%b %d, %Y') }}!
                  </div>

                  <div class="d-flex" style="float:right">
                    <a
                      href="" 
                      data-bs-toggle="modal" 
                      data-bs-target="#modal-edit-check-in-{{ check_in.check_in_id }}" 
                      style="color: rgb(44, 44, 44)"
                    >
                      <small><i data-bs-toggle="tooltip" data-bs-placement="right" title="edit check in" class="bi bi-pencil"></i></small>
                    </a>
                    &nbsp;&nbsp;&nbsp;
                    <form
                      action="/delete-check-in"
                      method="POST"
                    >
                      <button
                        class="btn btn-sm"
                        style="padding:0"
                        type="submit"
                        name="delete"
                        value="{{ check_in.check_in_id }}"
                        onclick="return confirm('Do you want to delete this check in?');"
                      >
                        <small>
                          <i data-bs-toggle="tooltip" data-bs-placement="right" title="delete check in" class="bi bi-x"></i>
                        </small>
                      </button>
                    </form>
                  </div>

                </div>
                  
                

                {% if check_in.miles_completed != None %}
                <div class="row">Miles completed: {{ check_in.miles_completed }}</div>
                {% endif %}
                
                {% if check_in.total_time != None %}
                <div class="row">Total time: {{ check_in.total_time }} hours</div>
                {% endif %}

                {% if check_in.notes != None %}
                <div class="row">Notes: {{ check_in.notes }}</div>
                {% endif %}

                
                  
                  <!-- Start Edit Check In Modal -->

                  <div class="modal fade" id="modal-edit-check-in-{{ check_in.check_in_id }}" tabindex="-1" aria-labelledby="modal-edit-check-in-{{ check_in.check_in_id }}-label" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="modal-edit-check-in-{{ check_in.check_in_id }}-label">Edit check in to this hike</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">

                          <form
                            action="/edit-check-in"
                            method="POST"
                          >

                            <div class="mb-3">
                              <div class="row">
                                <div class="col">
                                  <label for="pet_id" class="sr-only">Add a Pet</label>
                                  {% for pet in pets|sort(attribute='pet_name') %}
                                  {% if pet not in check_in.pets %}
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="add_pet_id" value="{{ pet.pet_id }}" id="add-to-check-in-{{ pet.pet_id }}">
                                    <label class="form-check-label" for="add-to-check-in-{{ pet.pet_id }}">
                                      {{ pet.pet_name }}
                                    </label>
                                  </div>
                                  {% endif %}
                                  {% endfor %}
                                </div>

                                <div class="col">
                                  <label for="pet_id" class="sr-only">Remove a Pet</label>
                                  {% for pet in pets|sort(attribute='pet_name') %}
                                  {% if pet in check_in.pets %}
                                  <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="remove_pet_id" value="{{ pet.pet_id }}" id="hike-page-remove-from-check-in-{{ pet.pet_id }}">
                                    <label class="form-check-label" for="hike-page-remove-from-check-in-{{ pet.pet_id }}">
                                      {{ pet.pet_name }}
                                    </label>
                                  </div>
                                  {% endif %}
                                  {% endfor %}
                                </div>
                              </div>
                            </div>
                            
                            <div class="mb-3">
                              <label for="date_hiked" class="sr-only">Date Hiked</label>&nbsp;<small class="text-muted">*</small>
                              <input
                                type="date"
                                name="date_hiked"
                                value="{{ check_in.date_hiked }}"
                                class="form-control input-lg"
                              />
                            </div>

                            <div class="mb-3">
                              <label for="miles_completed" class="sr-only"
                                >Miles Completed</label
                              >&nbsp;<small class="text-muted">*</small>
                              <input
                                type="number"
                                step=".1"
                                min="0"
                                name="miles_completed"
                                value="{{ check_in.miles_completed }}"
                                class="form-control input-lg"
                              />
                            </div>

                            <div class="mb-3">
                              <label for="total_time" class="sr-only">Total Time (Hours)</label>
                              <input
                                type="number"
                                step=".1"
                                min="0"
                                name="total_time"
                                value="{{ check_in.total_time }}"
                                class="form-control input-lg"
                              />
                            </div>

                            <div class="mb-3">
                              <label for="notes" class="sr-only">Notes</label>
                              <input
                                  type="text"
                                  name="notes"
                                  value="{{ check_in.notes }}"
                                  class="form-control"
                              />
                            </div>
                          <div class="modal-footer">
                            <button class="btn btn-sm btn-outline-dark btn-block" type="submit" name="check_in_id" value="{{ check_in.check_in_id }}">Submit</button>
                            <button type="button" class="btn btn-sm btn-secondary btn-block" data-bs-dismiss="modal">Close</button>
                          </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- End Edit Check In Modal -->



                  
              </div>
              {% endfor %}

          </div>
          {% endif %}
          <!-- End check in details for the hike -->
          {% else %}
          <div class="mt-3">Please log in to add a check in.</div>
          {% endif %}
        </div>

        <!-- End Check ins tab content -->
      </div>
      <!-- End All Tab Content -->
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block js %}
<!-- Google Maps API -->
<!-- <script src="/static/js/maps.js"></script>
<script
  async
  src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_KEY }}&callback=initMap">
</script> -->

<script src="/static/js/hikeDetails.js"></script>
{% endblock %}
