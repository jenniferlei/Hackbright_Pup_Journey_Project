{% extends 'base.html' %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
{% endblock %}

{% block title %}Pup Journey Home{% endblock %}

{% block body %}

<div class="container">
  {% if "user_email" in session %}

  <div class="row mt-3">
    <div class="card card-body col-7">
      <div class="row" id="home-visuals-container">
          <div class="row card-title">
            <div class="col"><h2><button id="get-graph-button" class="btn btn-link">Graph</button></h2></div>
            <div class="col"><h2><button id="get-map-button" class="btn btn-link">Map</button></h2></div>
            <div class="col"><h2><button id="get-checkins-button" class="btn btn-link">Check Ins</button></h2></div>
          </div>

        <div class="row">
          <div id="graph-map-checkins">
            <canvas id="summary-chart"></canvas>
          </div>
        </div>
      </div>
    </div>


    <div class="card card-body col-3">
      <div class="row">
        <div class="col">
          <h2>Pets</h2>
        </div>

        <div class="col">
          <button type="button" class="btn btn-link" data-bs-toggle="modal" data-bs-target="#modal-add-pet">
            + Pet
          </button>
        </div>
      </div>
      
      <div class="modal fade" id="modal-add-pet" tabindex="-1" aria-labelledby="modal-add-pet-label" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modal-add-pet-label">Add Pet Info</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form action="/add-pet" id="form-add-pet" method="POST" enctype="multipart/form-data">
            
                <div>
                  <label for="pet_name" class="sr-only">Name</label>
                  <input type="text"
                          name="pet_name"
                          class="form-control input-lg"
                          placeholder="Name"
                          required
                          autofocus>
                </div>
            
                <div>
                  <label for="gender" class="sr-only">Gender</label>
                  <select name="gender" class="form-control input-lg">
                      <option value=""></option>
                      <option value="female">female</option>
                      <option value="male">male</option>
                  </select>
                </div>

                <div>
                  <label for="birthday" class="sr-only">Birthday</label>
                  <input type="date"
                          name="birthday"
                          class="form-control input-lg">
                </div>

                <div>
                  <label for="breed" class="sr-only">Breed</label>
                  <input type="text"
                          name="breed"
                          class="form-control input-lg"
                          placeholder="Breed">
                </div>

                <div>
                    <label for="my_file" class="sr-only">Image</label>
                    <input type="file" 
                            name="my_file"
                            class="form-control input-lg"
                            accept="image/png, image/jpeg">
                </div>
                <p></p>
              <div class="modal-footer">
                <button class="btn btn-sm btn-primary btn-block mt-4" type="submit">Save</button>
                </form>
                <button type="button" class="btn btn-sm btn-secondary btn-block mt-4" data-bs-dismiss="modal">Close</button>
              </div>

            </div>
          </div>
        </div>
      </div>
      <div id="pet-profile-container">
      </div>
    </div>
  </div>

  {% else %}
  <div class="row align-items-center">


    <div class="card card-body align-items-center">
      <div>
        <img src="/static/img/homepage.jpg" id="welcome-img">
        <p><span class="app-description">Find pup friendly hikes, bookmark your favorites, and check in to hikes your pup has done!</span></p>
      </div>
    </div>
  </div>
  {% endif %}

</div>

{% endblock %}

{% block js %}
	<script src="/static/js/homepage.js"></script>
  <script src="/static/js/petProfile.jsx" type="text/jsx"></script>
{% endblock %}